<!--
README (fallback widget)
=======================
File: fallback-finedining-coach.html
Usage:
- Paste this single snippet into GoHighLevel or any page builder. No build step.
- Mobile-first, minimal JS, uses Tailwind CDN (can remove if your theme already includes it).
- LocalStorage key: `fdc_fallback_v1`
- Provides Quick Pick and a light Standard mode. For full features, use the React component.

Pre-seeding templates:
- Edit the `TEMPLATES` constant inside the script to tweak defaults (steakhouse, italian, sushi).
-->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Fine Dining Coach (Fallback)</title>
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
<style>
  .card{border:1px solid rgba(0,0,0,.1); border-radius:16px; padding:12px; background:rgba(255,255,255,.9);}
</style>
</head>
<body class="bg-gray-50 text-gray-900">
<div class="max-w-xl mx-auto p-4">
  <h1 class="text-2xl font-bold">Fine Dining Coach</h1>
  <p class="text-sm text-gray-600">Quick picks in 5 seconds. All local.</p>

  <div class="card mt-3">
    <div class="flex gap-2">
      <button id="modeQuick" class="px-3 py-1 rounded-lg bg-gray-900 text-white">Quick</button>
      <button id="modeStd" class="px-3 py-1 rounded-lg bg-gray-200">Standard</button>
    </div>
    <div class="grid grid-cols-2 gap-2 mt-3">
      <div>
        <label class="text-xs">Cuisine</label>
        <select id="cuisine" class="w-full border rounded-lg px-2 py-1">
          <option>Steakhouse</option><option>Italian</option><option>Sushi/Japanese</option>
        </select>
      </div>
      <div>
        <label class="text-xs">Remaining kcal</label>
        <input id="kcal" type="number" class="w-full border rounded-lg px-2 py-1" value="650"/>
      </div>
    </div>
    <div id="stdInputs" class="hidden mt-2">
      <label class="text-xs block">Menu text (one per line)</label>
      <textarea id="menu" rows="4" class="w-full border rounded-lg px-2 py-1" placeholder="Filet mignon 8 oz; Grilled salmon; Mashed potatoes"></textarea>
      <div class="grid grid-cols-2 gap-2 mt-2">
        <label class="flex items-center gap-2 text-xs"><input id="lowCarb" type="checkbox"/> Low-carb</label>
        <label class="flex items-center gap-2 text-xs"><input id="lowNa" type="checkbox"/> Low-sodium</label>
      </div>
    </div>
    <button id="run" class="mt-3 px-3 py-2 rounded-xl bg-blue-600 text-white w-full">Generate</button>
  </div>

  <div id="out" class="card mt-3 text-sm hidden"></div>

  <p class="text-[11px] text-gray-500 mt-4">Heuristics only. For full features use the React component.</p>
</div>

<script>
const LSKEY = 'fdc_fallback_v1';
const state = JSON.parse(localStorage.getItem(LSKEY) || '{}');
function save(){ localStorage.setItem(LSKEY, JSON.stringify(state)); }

const TEMPLATES = {
  'Steakhouse': ['Filet mignon (8 oz), grilled', 'Grilled salmon (6–8 oz)', 'Grilled chicken breast (6–8 oz)'],
  'Italian': ['Chicken piccata (light sauce) + veg', 'Grilled fish + veg', 'Steak tagliata + arugula'],
  'Sushi/Japanese': ['Sashimi + edamame + cucumber salad', 'Grilled salmon teriyaki (sauce side)', 'Tuna tataki + seaweed salad']
};

const cuisineEl = document.getElementById('cuisine');
const kcalEl = document.getElementById('kcal');
const menuEl = document.getElementById('menu');
const outEl = document.getElementById('out');
const modeQuickEl = document.getElementById('modeQuick');
const modeStdEl = document.getElementById('modeStd');
const stdInputs = document.getElementById('stdInputs');
let mode = state.mode || 'Quick';

function updateMode(){
  stdInputs.classList.toggle('hidden', mode!=='Standard');
  modeQuickEl.className = 'px-3 py-1 rounded-lg ' + (mode==='Quick'?'bg-gray-900 text-white':'bg-gray-200');
  modeStdEl.className = 'px-3 py-1 rounded-lg ' + (mode==='Standard'?'bg-gray-900 text-white':'bg-gray-200');
  state.mode = mode; save();
}
modeQuickEl.onclick = ()=>{ mode='Quick'; updateMode(); };
modeStdEl.onclick = ()=>{ mode='Standard'; updateMode(); };
updateMode();

function parseMenu(text){
  return text.split('\n').map(s=>s.trim()).filter(Boolean);
}
function picksForCuisine(c){ return TEMPLATES[c] || []; }

document.getElementById('run').onclick = ()=>{
  const cuisine = cuisineEl.value;
  const kcal = Number(kcalEl.value||650);
  const items = (menuEl.value.trim()? parseMenu(menuEl.value): picksForCuisine(cuisine));
  const best = items[0] || 'Grilled lean protein + double veg (sauce on side)';
  const script = 'no butter; grilled; sauce on side; half-starch; double veg';
  outEl.innerHTML = `
    <div class="font-semibold mb-1">Best pick</div>
    <div>${best}</div>
    <div class="mt-1"><span class="font-medium">Say this:</span> “${script}”.</div>
    <div class="mt-2 text-xs">Estimates: ~500–700 kcal, 40–60 g protein.</div>
    <div class="mt-2 text-xs">Sushi note: prefer sashimi + edamame + cucumber salad; watch sauces.</div>
  `;
  outEl.classList.remove('hidden');
};
</script>
</body>
</html>
